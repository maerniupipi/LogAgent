# 日志监控系统 - 快速开始

## 🚀 一键启动

双击运行 `start_all.bat`，系统会自动：
1. 启动后端服务（8000端口）
2. 在浏览器打开前端页面

## 📋 已配置的环境

系统已预配置三个环境，可直接使用：

### 1. UAT环境
- 地址：192.168.100.127
- 用户：root
- 容器：otc-market, otc-api, otc-web

### 2. TEST环境
- 地址：192.168.100.126
- 用户：root
- 容器：otc-market, otc-api, otc-web

### 3. DEV环境
- 地址：192.168.100.27
- 用户：root
- 容器：otc-market, otc-api, otc-web

## 📖 使用步骤

### 1. 采集日志

1. 点击页面右上角"采集日志"按钮
2. 选择"使用已保存的配置"（默认已选中）
3. 从"选择服务器配置"下拉框选择环境：
   - UAT环境
   - TEST环境
   - DEV环境
4. 从"容器名称"下拉框选择要查看的容器：
   - otc-market
   - otc-api
   - otc-web
5. 设置日志行数（默认1000行）
6. 勾选"使用AI分析"（推荐）
7. 点击"开始采集"

### 2. 查看错误

- 采集完成后，错误列表会自动显示
- 点击任意错误可查看详情
- 详情包括：
  - 错误内容
  - 上下文（堆栈信息）
  - AI分析结果（错误原因和解决方案）

### 3. 筛选和管理

- 使用"全部状态"下拉框筛选：
  - 未处理
  - 已解决
- 点击"刷新"按钮更新列表
- 在错误详情中可以更新状态

## 🔧 配置管理

如需添加新环境或修改配置：

1. 点击"配置管理"按钮
2. 查看现有配置
3. 点击"➕ 添加新配置"添加新环境
4. 或点击"删除"按钮删除不需要的配置

## 💡 提示

- **首次使用**：系统会自动连接SSH并采集日志，可能需要几秒钟
- **AI分析**：在后台异步执行，采集完成后会继续分析，稍后刷新即可看到分析结果
- **密码安全**：配置保存在本地 `backend/server_configs.json`，请注意文件安全
- **网络要求**：需要能够SSH连接到目标服务器

## 🐛 故障排查

### SSH连接失败
- 检查服务器地址是否正确
- 确认用户名密码是否正确
- 检查网络连接和防火墙设置
- 确认SSH服务是否运行（端口22）

### Docker命令失败
- 确认容器名称正确
- 确认容器正在运行：`docker ps`
- 确认SSH用户有Docker权限

### AI分析失败
- 检查后端日志
- 确认Qwen API服务正常运行

## 📁 文件说明

- `start_all.bat` - 一键启动脚本
- `backend/log_api.py` - 后端API服务
- `backend/server_configs.json` - 服务器配置文件
- `backend/logs.db` - 日志数据库
- `frontend/log_monitor.html` - 前端页面

## 🔄 重新初始化配置

如需重新初始化三个环境的配置：

```bash
cd backend
python init_configs.py
```

这会重新创建UAT、TEST、DEV三个环境的配置。
